(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93d52448"],{"1f58":function(e,t,r){},"3cc8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"history"}},[r("Header",[r("el-breadcrumb",{attrs:{slot:"left","separator-class":"el-icon-arrow-right"},slot:"left"},[r("el-breadcrumb-item",[e._v("收入预算")]),r("el-breadcrumb-item",[e._v("收入调整")])],1),r("div",{attrs:{slot:"right"},slot:"right"})],1),r("div",{staticClass:"content"},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-date-picker",{attrs:{type:"year",placeholder:"选择年",format:"yyyy 年","value-format":"yyyy"},on:{change:e.selectYearData},model:{value:e.yearValue,callback:function(t){e.yearValue=t},expression:"yearValue"}})],1),r("el-col",{attrs:{span:8,offset:1}},[r("el-input",{attrs:{placeholder:"输入编号或预算体查询",clearable:""},on:{change:e.search},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)],1),r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.history,border:""}},[r("el-table-column",{attrs:{label:"展开",type:"expand",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-row",{staticStyle:{height:"20px"}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"纵横轴:"}},[r("span",[e._v("\n                        "+e._s(e.axisMap[t.row.axis])+"\n                      ")])]),r("el-form-item",{attrs:{label:"定量定性:"}},[r("span",[e._v("\n                         "+e._s(e.qqMap[t.row.qq])+"\n                      ")])]),r("el-form-item",{attrs:{label:"正负项:"}},[r("span",[e._v("\n                        "+e._s(e.pmMap[t.row.pm])+"\n                      ")])]),r("el-form-item",{attrs:{label:"单位:"}},[r("span",[e._v(e._s(t.row.unit))])])],1)],1),r("el-row",{staticStyle:{height:"20px"}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"8%",color:"rgb(94, 94, 94)"},attrs:{label:"操作后"}}),r("el-form-item",{attrs:{label:"2区间:"}},[r("span",[e._v(e._s(t.row.after.line2))])]),r("el-form-item",{attrs:{label:"4区间:"}},[r("span",[e._v(e._s(t.row.after.line4))])]),r("el-form-item",{attrs:{label:"6区间:"}},[r("span",[e._v(e._s(t.row.after.line6))])]),r("el-form-item",{attrs:{label:"8区间:"}},[r("span",[e._v(e._s(t.row.after.line8))])]),r("el-form-item",{attrs:{label:"10区间:"}},[r("span",[e._v(e._s(t.row.after.line10))])])],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"8%"},attrs:{label:"操作前"}}),r("el-form-item",{attrs:{label:"2区间:"}},[r("span",[e._v(e._s(t.row.before.line2))])]),r("el-form-item",{attrs:{label:"4区间:"}},[r("span",[e._v(e._s(t.row.before.line4))])]),r("el-form-item",{attrs:{label:"6区间:"}},[r("span",[e._v(e._s(t.row.before.line6))])]),r("el-form-item",{attrs:{label:"8区间:"}},[r("span",[e._v(e._s(t.row.before.line8))])]),r("el-form-item",{attrs:{label:"10区间:"}},[r("span",[e._v(e._s(t.row.before.line10))])])],1)],1)],1)]}}])}),r("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),r("el-table-column",{attrs:{prop:"jobnumber",label:"工号"}}),r("el-table-column",{attrs:{prop:"period",label:"周期"}}),r("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.code)+" / "+e._s(t.row.typeName)+"\n          ")]}}])}),r("el-table-column",{attrs:{prop:"weights",label:"权重"}}),r("el-table-column",{attrs:{label:"调整时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.parseTime(t.row.createTime))+"\n          ")]}}])}),r("el-table-column",{attrs:{prop:"manager.userName",label:"操作人"}}),r("el-table-column",{attrs:{label:"数据来源",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.changeTypeMap[t.row.changeType])+"\n          ")]}}])})],1),r("el-pagination",{staticClass:"pagi",attrs:{"current-page":e.page,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.count,align:"right"},on:{"current-change":e.changePage}})],1)],1)},l=[],s=r("0418"),i={name:"history",components:{Header:s["a"]},data:function(){return{changeTypeMap:{0:"导入",1:"增加",2:"修改",3:"删除"},typeMap:{0:"系统定义",1:"用户自建"},qqMap:{1:"定量",2:"定性"},axisMap:{1:"横轴",2:"纵轴"},pmMap:{1:"正",2:"负"},yes1:!1,yes2:!1,titleName:"",typename:[],typeData:{year:(new Date).getFullYear()},rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,message:"最少输入2个字符",trigger:"blur"}],jobnumber:[{required:!0,message:"请输入工号",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],period:[{required:!0,message:"请输入周期",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],incomings:[{required:!0,message:"请输入目标",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],line2:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],line4:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],line6:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],line8:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],line10:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],weights:[{required:!0,message:"请输入数值",trigger:"blur"},{min:2,message:"最少输入3个字符",trigger:"blur"}],code:[{required:!0,message:"请选择活动区域",trigger:"change"}]},dialogShow:!1,history:[],page:1,limit:10,count:0,year:(new Date).getFullYear(),keywords:"",yearValue:new Date}},methods:{parseTime:function(e){return e=new Date(e),"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes())},search:function(){this.page=1,this.keywords=this.keywords.trim(),this.getHistory()},selectYearData:function(){this.page=1,this.year=new Date(this.yearValue).getFullYear(),this.getHistory()},getHistory:function(){var e=this;this.$http.get("/ec/api/incomings/history?year=".concat(this.year,"&page=").concat(this.page,"&limit=").concat(this.limit,"&keywords=").concat(this.keywords)).then(function(t){var r=t.data;0===r.errcode&&(e.count=r.data.count||0,e.history=r.data.rows||[])})},changePage:function(e){this.page=e,this.getHistory()}},created:function(){this.page=this.$route.query.page||1,this.getHistory()}},n=i,o=(r("c65b"),r("2877")),c=Object(o["a"])(n,a,l,!1,null,"474f5940",null);t["default"]=c.exports},c65b:function(e,t,r){"use strict";var a=r("1f58"),l=r.n(a);l.a}}]);
//# sourceMappingURL=chunk-93d52448.a27fd56b.js.map