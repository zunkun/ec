(function(e){function t(t){for(var a,r,c=t[0],u=t[1],s=t[2],l=0,d=[];l<c.length;l++)r=c[l],o[r]&&d.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},o={app:0},i=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-0fab4c62":"5056235b","chunk-2f6779b8":"6092afe5","chunk-58a8ed5a":"a5cfe15d","chunk-5ad86083":"bf7621c8","chunk-5b486e20":"6da9f4f9","chunk-73480488":"ed2e083e","chunk-86756960":"d20a72b1","chunk-c0b98ef2":"193b7af4","chunk-c392e45e":"4530a434"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-0fab4c62":1,"chunk-2f6779b8":1,"chunk-58a8ed5a":1,"chunk-5ad86083":1,"chunk-5b486e20":1,"chunk-73480488":1,"chunk-86756960":1,"chunk-c0b98ef2":1,"chunk-c392e45e":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-0fab4c62":"b7bce16f","chunk-2f6779b8":"da7b1dbb","chunk-58a8ed5a":"813e094c","chunk-5ad86083":"63b02110","chunk-5b486e20":"7ab7fe2b","chunk-73480488":"309e2c24","chunk-86756960":"cc0aa242","chunk-c0b98ef2":"9ae3adcb","chunk-c392e45e":"66f57677"}[e]+".css",o=u.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var s=i[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){s=d[c],l=s.getAttribute("data-href");if(l===a||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e),s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");i.type=a,i.request=r,n[1](i)}o[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/ecpc/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},"0418":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"header"}},[n("el-header",[n("el-row",{staticClass:"header-wrapper"},[n("el-col",{attrs:{span:22}},[e._t("left")],2),n("el-col",{attrs:{span:2}},[e._t("right")],2)],1)],1)],1)},r=[],o={name:"Header"},i=o,c=(n("8baf"),n("2877")),u=Object(c["a"])(i,a,r,!1,null,null,null);t["a"]=u.exports},4215:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var a=n("3b8d"),r=(n("c5f6"),n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-aside",{attrs:{width:"160px"}},[n("el-menu",{attrs:{"default-active":"groupfees",collapse:!1,"active-text-color":"#FF9900",router:!0}},[n("el-submenu",{attrs:{index:"budgets-manage"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-platform"}),n("span",[e._v("费用预算")])]),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"groupfees"}},[e._v("预算列表")]),n("el-menu-item",{attrs:{index:"grouplists"}},[e._v("预算项目")]),n("el-menu-item",{attrs:{index:"exchange"}},[e._v("预算调整")]),n("el-menu-item",{attrs:{index:"budgetfiles"}},[e._v("上传记录")])],1)],2),n("el-submenu",{attrs:{index:"incomings-manage"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-notebook-1"}),n("span",[e._v("收入预算")])]),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"incomings"}},[e._v("收入目标")]),n("el-menu-item",{attrs:{index:"history"}},[e._v("调整记录")]),n("el-menu-item",{attrs:{index:"incomingfiles"}},[e._v("上传记录")])],1)],2),n("el-submenu",{attrs:{index:"settings"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-truck"}),n("span",[e._v("基本设置")])]),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"typelists"}},[e._v("类型维护")]),n("el-menu-item",{attrs:{index:"files"}},[e._v("预算导入")])],1)],2)],1)],1),n("el-container",[n("el-main",{attrs:{id:"main"}},[n("router-view")],1)],1)],1)],1)},i=[],c={data:function(){return{}}},u=c,s=(n("034f"),n("2877")),l=Object(s["a"])(u,o,i,!1,null,null,null),d=l.exports,p=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"groupfees"}},[n("Header",[n("el-breadcrumb",{attrs:{slot:"left","separator-class":"el-icon-arrow-right"},slot:"left"},[n("el-breadcrumb-item",[e._v("预算管理")]),n("el-breadcrumb-item",[e._v("费用预算")])],1),n("div",{attrs:{slot:"right"},slot:"right"})],1),n("div",{staticClass:"content"},[n("el-row",[n("el-col",{attrs:{span:4}},[n("el-date-picker",{attrs:{type:"year",placeholder:"选择年",format:"yyyy 年","value-format":"yyyy"},on:{change:e.selectYearData},model:{value:e.yearValue,callback:function(t){e.yearValue=t},expression:"yearValue"}})],1),n("el-col",{attrs:{span:8,offset:1}},[n("el-input",{attrs:{placeholder:"输入编号或预算体查询",clearable:""},on:{change:e.search},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)],1),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{prop:"code",label:"编号",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"预算体"}}),n("el-table-column",{attrs:{label:"费用类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.feeType[t.row.type])+"\n        ")]}}])}),n("el-table-column",{attrs:{pr:"",prop:"budget",label:"预算"}}),n("el-table-column",{attrs:{pr:"",prop:"expense",label:"己用"}}),n("el-table-column",{attrs:{pr:"",prop:"trip",label:"余额"}})],1),n("el-pagination",{staticClass:"pagi",attrs:{"current-page":e.page,"page-size":15,layout:"total, prev, pager, next, jumper",total:e.count,align:"right"},on:{"current-change":e.changePage}})],1)],1)},h=[],m=(n("7f7f"),n("0418")),g={name:"organization",components:{Header:m["a"]},data:function(){return{tableData:[],page:1,limit:5,count:0,year:(new Date).getFullYear(),feeType:{trip:"差旅费",benefits:"福利费",others:"其他费用"},keywords:"",yearValue:new Date}},methods:{search:function(){this.page=1,this.keywords=this.keywords.trim(),this.getGroupBudgets()},selectYearData:function(){this.page=1,this.year=new Date(this.yearValue).getFullYear(),this.getGroupBudgets()},getGroupBudgets:function(){var e=this;this.$http.get("/ec/api/budgets/lists?year=".concat(this.year,"&page=").concat(this.page,"&limit=").concat(this.limit,"&keywords=").concat(this.keywords)).then(function(t){var n=t.data;0===n.errcode&&(e.count=3*(n.data.count||0),e.setData(n.data.budgets))})},setData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=["trip","benefits","others"];e.map(function(e){for(var a=0,r=n;a<r.length;a++){var o=r[a];t.push({code:e.code,name:e.name,type:o,budget:e[o].budget,expense:e[o].expense,trip:e[o].balance})}}),this.tableData=t},changePage:function(e){this.page=e,this.getGroupBudgets()}},created:function(){this.page=this.$route.query.page||1,this.getGroupBudgets()}},b=g,v=(n("8f95"),Object(s["a"])(b,f,h,!1,null,"69384f4a",null)),y=v.exports,k=n("2f62");r["default"].use(k["a"]);var w=new k["a"].Store({state:{isSignin:"true"===window.localStorage.getItem("isSignin"),user:JSON.parse(window.localStorage.getItem("user")),exchanges:{count:0,records:[]}},mutations:{setSignin:function(e,t){e.isSignin=t,window.localStorage.setItem("isSignin",t)},setUser:function(e,t){e.user=t,window.localStorage.setItem("user",JSON.stringify(t))},setExchanges:function(e,t){e.exchanges.count=t.count,e.exchanges.records=t.records}}}),x=n("bc3a"),S=n.n(x);r["default"].use(p["a"]);var _=new p["a"]({base:"/ecpc/",routes:[{path:"/",name:"home",component:y,meta:{title:"预算列表",isAuth:!0}},{path:"/grouplists",name:"grouplists",component:function(){return n.e("chunk-58a8ed5a").then(n.bind(null,"488c"))},meta:{title:"预算项目",isAuth:!0}},{path:"/groupfees",name:"groupfees",component:y,meta:{title:"预算列表",isAuth:!0}},{path:"/exchange",name:"exchange",component:function(){return n.e("chunk-73480488").then(n.bind(null,"4747"))},meta:{title:"预算调整",isAuth:!0}},{path:"/budgetfiles",name:"budgetfiles",component:function(){return n.e("chunk-0fab4c62").then(n.bind(null,"57e3"))},meta:{title:"上传记录",isAuth:!0}},{path:"/incomings",name:"incomings",component:function(){return n.e("chunk-5ad86083").then(n.bind(null,"e6ab"))},meta:{title:"收入目标",isAuth:!0}},{path:"/history",name:"history",component:function(){return n.e("chunk-c392e45e").then(n.bind(null,"3cc8"))},meta:{title:"收入目标",isAuth:!0}},{path:"/incomingfiles",name:"incomingfiles",component:function(){return n.e("chunk-5b486e20").then(n.bind(null,"ed89"))},meta:{title:"上传记录",isAuth:!0}},{path:"/typelists",name:"typelists",component:function(){return n.e("chunk-2f6779b8").then(n.bind(null,"11bf"))},meta:{title:"类型维护",isAuth:!0}},{path:"/files",name:"files",component:function(){return n.e("chunk-86756960").then(n.bind(null,"34e8"))},meta:{title:"类型维护",isAuth:!0}},{path:"/staffprocess",name:"staffprocess",component:function(){return n.e("chunk-c0b98ef2").then(n.bind(null,"2a07"))},meta:{title:"员工出差流程",isAuth:!0}}]});_.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,o,i,c,u,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=Number(localStorage.getItem("expire"))||0,t.meta.title&&(document.title=t.meta.title),!t.matched.some(function(e){return e.meta.isAuth})){e.next=11;break}if(o=w.state.token||localStorage.getItem("token"),o&&!(r<Date.now())){e.next=11;break}if(!t.query.userId){e.next=11;break}return e.next=8,S.a.get("/ec/api/auth/login?userId=".concat(t.query.userId));case 8:i=e.sent,c=i.data,0===c.errcode&&(u=c.data.user,s=c.data.token,localStorage.setItem("user",JSON.stringify(u)),localStorage.setItem("token",s),localStorage.setItem("expire",Date.now()+864e5),w.commit("setUser",u),window.location.reload());case 11:a();case 12:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}());var I=_,A={development:{corpId:"dingcbcbb63d3edd5478",corpName:"上海铭悦软件有限公司"},production:{corpId:"ding9f71dd70c3adb557",corpName:"海尔融资租赁股份有限公司"}},O=A,j=n("2c18"),D=n("5c96"),C=n.n(D);n("0fae"),n("ed2c");r["default"].use(C.a),r["default"].config.productionTip=!1,r["default"].prototype.GLOBAL=O,r["default"].prototype.$http=S.a;var E=localStorage.getItem("token"),N=Number(localStorage.getItem("expire"))||0;!E||N<Date.now()?j["ready"](function(){j["runtime"].permission.requestAuthCode({corpId:O["production"].corpId||"dingcbcbb63d3edd5478",onSuccess:function(e){S.a.get("/ec/api/auth/login?corpId=".concat(O.corpId,"&code=").concat(e.code)).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.data,0===n.errcode&&(a=n.data.user,r=n.data.token,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",r),localStorage.setItem("expire",Date.now()+864e5),w.commit("setUser",a),window.location.reload());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})},onFail:function(){alert("获取用户信息失败")}})}):S.a.interceptors.request.use(function(e){return e.headers.Authorization=localStorage.getItem("token"),e},function(e){return Promise.reject(e)}),new r["default"]({router:I,store:w,render:function(e){return e(d)}}).$mount("#app")},"64a9":function(e,t,n){},"782e":function(e,t,n){},"8baf":function(e,t,n){"use strict";var a=n("782e"),r=n.n(a);r.a},"8f95":function(e,t,n){"use strict";var a=n("4215"),r=n.n(a);r.a},ed2c:function(e,t,n){}});
//# sourceMappingURL=app.1dfb0b70.js.map