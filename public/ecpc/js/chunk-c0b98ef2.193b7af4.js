(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0b98ef2"],{"0a49":function(t,e,a){var r=a("9b43"),n=a("626a"),s=a("4bf8"),i=a("9def"),o=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,f=6==t,p=5==t||f,d=e||o;return function(e,o,h){for(var m,g,b=s(e),y=n(b),v=r(o,h,3),w=i(y.length),S=0,_=a?d(e,w):l?d(e,0):void 0;w>S;S++)if((p||S in y)&&(m=y[S],g=v(m,S,b),t))if(a)_[S]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return S;case 2:_.push(m)}else if(u)return!1;return f?-1:c||u?u:_}}},1169:function(t,e,a){var r=a("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"20d6":function(t,e,a){"use strict";var r=a("5ca1"),n=a("0a49")(6),s="findIndex",i=!0;s in[]&&Array(1)[s](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},"2a07":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"staffs"}},[a("Header",[a("el-breadcrumb",{attrs:{slot:"left","separator-class":"el-icon-arrow-right"},slot:"left"},[a("el-breadcrumb-item",[t._v("流程管理")]),a("el-breadcrumb-item",[t._v("出差流程")])],1),a("div",{attrs:{slot:"right"},slot:"right"})],1),a("div",{staticClass:"inner"},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入关键词查询"},on:{change:t.search},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.processes,border:""}},[a("el-table-column",{attrs:{label:"员工",prop:"userName",width:"180px;"}}),a("el-table-column",{attrs:{label:"部门",prop:"deptName"}}),a("el-table-column",{attrs:{label:"预算部门"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.group?[t._v("\n          "+t._s(e.row.group.name)+"\n        ")]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"直接审批人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.managers1.join())+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"二级审批人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.managers2.join())+"\n        ")]}}])}),a("el-table-column",{attrs:{width:"140px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.typeMap[e.row.type])+"\n        ")]}}])},[a("template",{slot:"header"},[a("el-popover",{attrs:{placement:"bottom-end",title:"流程类型",width:"240",trigger:"hover",content:"普通：部门变动自动修改审批流程。 特殊：部门变动不自动修改流程。"}},[a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[t._v("流程类型")]),a("span",[a("i",{staticClass:"el-icon-question"})])])])],1)],2),a("el-table-column",{attrs:{label:"操作",width:"120px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"warning"},on:{click:function(a){return t.editProcess(e.row)}}},[t._v("修 改")])]}}])})],1),a("el-pagination",{staticClass:"pagi",attrs:{"current-page":t.page,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.count,align:"right"},on:{"current-change":t.changePage}})],1),a("el-dialog",{attrs:{title:"出差审批流修改",visible:t.editVisible,width:"80%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-row",{staticStyle:{"padding-left":"40px"}},[a("el-col",{attrs:{span:6}},[t._v("\n        姓名: "+t._s(t.process.userName)+"\n      ")]),a("el-col",{attrs:{span:6}},[t._v("\n        部门: "+t._s(t.process.deptName)+"\n      ")]),a("el-col",{attrs:{span:6}},[t._v("\n        预算部门: "+t._s(t.process.group.name)+"\n      ")])],1),a("el-form",{ref:"processForm",staticClass:"form1",attrs:{model:t.process,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"流程类型"}},[a("el-select",{staticClass:"select1",attrs:{placeholder:"选择类型",number:""},model:{value:t.process.type,callback:function(e){t.$set(t.process,"type",e)},expression:"process.type"}},[a("el-option",{attrs:{label:"普通流程",value:0}}),a("el-option",{attrs:{label:"特殊流程",value:1}})],1)],1),a("el-form-item",{attrs:{label:"直接审批人"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请选择",readonly:"",value:t.process.managers1.join()}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.showManager("managers1")}},slot:"append"},[t._v("选择")])],1)],1),a("el-form-item",{attrs:{label:"二级审批人"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请选择",value:t.process.managers2.join(),readonly:""}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.showManager("managers2")}},slot:"append"},[t._v("选择")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"success",plain:""},on:{click:t.setProcess}},[t._v("确 定")])],1),a("el-dialog",{attrs:{title:"选择审批人",visible:t.managerVisible,"append-to-body":"",width:"80%"},on:{"update:visible":function(e){t.managerVisible=e}}},[a("h3",[t._v(t._s(t.managerMap[t.managerType]))]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.managers,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"员工",prop:"userName",width:"180px;"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"danger"},on:{click:function(a){return t.deleteStaff(e.row)}}},[t._v("删除")])]}}])})],1),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"输入姓名或部门查询"},on:{change:t.searchStaff},model:{value:t.staffKeywords,callback:function(e){t.staffKeywords=e},expression:"staffKeywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchStaff},slot:"append"})],1)],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.staffs,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"员工",prop:"userName",width:"180px;"}}),a("el-table-column",{attrs:{label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.departments[0].deptName)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120px;"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"success"},on:{click:function(a){return t.selectStaff(e.row)}}},[t._v("选择")])]}}])})],1),a("el-pagination",{staticClass:"pagi",attrs:{"current-page":t.staffPage,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.staffCount,align:"right"},on:{"current-change":t.changeStaffPage}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.managerVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"success",plain:""},on:{click:t.setManager}},[t._v("确 定")])],1)],1)],1)],1)},n=[],s=(a("20d6"),a("ac4d"),a("8a81"),a("ac6a"),a("0418")),i={name:"staffprocess",components:{Header:s["a"]},data:function(){return{count:0,page:1,limit:10,processes:[],keywords:"",typeMap:{0:"普通",1:"特殊"},process:{group:{},managers1:[],managers2:[]},editVisible:!1,managerVisible:!1,managers:[],managerType:"manager1",staffKeywords:"",staffCount:0,staffPage:1,staffs:[],managerMap:{managers1:"直接审批人",managers2:"二级审批人"}}},methods:{search:function(){this.page=1,this.keywords=this.keywords.trim(),this.getStaffProcess()},getStaffProcess:function(){var t=this;this.$http.get("/ec/api/processes/staffs?page=".concat(this.page,"&limit=").concat(this.limit,"&keywords=").concat(this.keywords)).then(function(e){var a=e.data;0===a.errcode&&(t.processes=a.data.rows||[],t.count=a.data.count||0)})},changePage:function(t){this.page=t,this.getStaffProcess()},editProcess:function(t){this.process=t,this.editVisible=!0},getStaffLists:function(){var t=this;this.$http.get("/ec/api/staffs?page=".concat(this.staffPage,"&limit=").concat(this.limit,"&keywords=").concat(this.staffKeywords)).then(function(e){var a=e.data;0===a.errcode&&(t.staffs=a.data.rows||[],t.staffCount=a.data.count||0)})},showManager:function(t){if(this.managerType=t,"managers1"===t){var e=[],a=this.process.approvals[0].users||[],r=!0,n=!1,s=void 0;try{for(var i,o=a[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;e.push({userId:l.userId,userName:l.userName})}}catch(b){n=!0,s=b}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}this.managers=e}else if(this.process.approvals[1]){var c=[],u=this.process.approvals[1].users||[],f=!0,p=!1,d=void 0;try{for(var h,m=u[Symbol.iterator]();!(f=(h=m.next()).done);f=!0){var g=h.value;c.push({userId:g.userId,userName:g.userName})}}catch(b){p=!0,d=b}finally{try{f||null==m.return||m.return()}finally{if(p)throw d}}this.managers=c}else this.managers=[];this.managerVisible=!0},searchStaff:function(){this.staffPage=1,this.staffKeywords=this.staffKeywords.trim(),this.getStaffLists()},changeStaffPage:function(t){this.staffPage=t,this.getStaffLists()},selectStaff:function(t){var e=this.managers.findIndex(function(e){return e.userId===t.userId});e>-1||this.managers.push({userId:t.userId,userName:t.userName})},deleteStaff:function(t){var e=this.managers.findIndex(function(e){return e.userId===t.userId});this.$delete(this.managers,e)},setManager:function(){"managers1"===this.managerType?this.process.approvals[0].users=this.managers:this.process.approvals[1]?this.process.approvals[1].users=this.managers:this.process.approvals.push({sequence:2,users:this.managers});var t=[],e=!0,a=!1,r=void 0;try{for(var n,s=this.managers[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var i=n.value;t.push(i.userName)}}catch(o){a=!0,r=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}this.process[this.managerType]=t,this.managers=[],this.managerVisible=!1},setProcess:function(){var t=this;this.$http.put("/ec/api/staffs/process",this.process).then(function(e){var a=e.data;0===a.errcode&&(t.getStaffProcess(),t.editVisible=!1)})}},created:function(){this.getStaffProcess(),this.getStaffLists()}},o=i,l=(a("35b4"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports},"35b4":function(t,e,a){"use strict";var r=a("de7b"),n=a.n(r);n.a},"37c8":function(t,e,a){e.f=a("2b4c")},"3a72":function(t,e,a){var r=a("7726"),n=a("8378"),s=a("2d00"),i=a("37c8"),o=a("86cc").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=s?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:i.f(t)})}},"67ab":function(t,e,a){var r=a("ca5a")("meta"),n=a("d3f4"),s=a("69a8"),i=a("86cc").f,o=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")(function(){return l(Object.preventExtensions({}))}),u=function(t){i(t,r,{value:{i:"O"+ ++o,w:{}}})},f=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,r)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[r].i},p=function(t,e){if(!s(t,r)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[r].w},d=function(t){return c&&h.NEED&&l(t)&&!s(t,r)&&u(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},"7bbc":function(t,e,a){var r=a("6821"),n=a("9093").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return n(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==s.call(t)?o(t):n(r(t))}},"8a81":function(t,e,a){"use strict";var r=a("7726"),n=a("69a8"),s=a("9e1e"),i=a("5ca1"),o=a("2aba"),l=a("67ab").KEY,c=a("79e5"),u=a("5537"),f=a("7f20"),p=a("ca5a"),d=a("2b4c"),h=a("37c8"),m=a("3a72"),g=a("d4c0"),b=a("1169"),y=a("cb7c"),v=a("d3f4"),w=a("6821"),S=a("6a99"),_=a("4630"),k=a("2aeb"),x=a("7bbc"),P=a("11e9"),L=a("86cc"),N=a("0d58"),O=P.f,C=L.f,T=x.f,M=r.Symbol,I=r.JSON,V=I&&I.stringify,j="prototype",E=d("_hidden"),A=d("toPrimitive"),F={}.propertyIsEnumerable,K=u("symbol-registry"),z=u("symbols"),D=u("op-symbols"),G=Object[j],H="function"==typeof M,J=r.QObject,$=!J||!J[j]||!J[j].findChild,R=s&&c(function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,a){var r=O(G,e);r&&delete G[e],C(t,e,a),r&&t!==G&&C(G,e,r)}:C,q=function(t){var e=z[t]=k(M[j]);return e._k=t,e},W=H&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Y=function(t,e,a){return t===G&&Y(D,e,a),y(t),e=S(e,!0),y(a),n(z,e)?(a.enumerable?(n(t,E)&&t[E][e]&&(t[E][e]=!1),a=k(a,{enumerable:_(0,!1)})):(n(t,E)||C(t,E,_(1,{})),t[E][e]=!0),R(t,e,a)):C(t,e,a)},B=function(t,e){y(t);var a,r=g(e=w(e)),n=0,s=r.length;while(s>n)Y(t,a=r[n++],e[a]);return t},Q=function(t,e){return void 0===e?k(t):B(k(t),e)},U=function(t){var e=F.call(this,t=S(t,!0));return!(this===G&&n(z,t)&&!n(D,t))&&(!(e||!n(this,t)||!n(z,t)||n(this,E)&&this[E][t])||e)},X=function(t,e){if(t=w(t),e=S(e,!0),t!==G||!n(z,e)||n(D,e)){var a=O(t,e);return!a||!n(z,e)||n(t,E)&&t[E][e]||(a.enumerable=!0),a}},Z=function(t){var e,a=T(w(t)),r=[],s=0;while(a.length>s)n(z,e=a[s++])||e==E||e==l||r.push(e);return r},tt=function(t){var e,a=t===G,r=T(a?D:w(t)),s=[],i=0;while(r.length>i)!n(z,e=r[i++])||a&&!n(G,e)||s.push(z[e]);return s};H||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(a){this===G&&e.call(D,a),n(this,E)&&n(this[E],t)&&(this[E][t]=!1),R(this,t,_(1,a))};return s&&$&&R(G,t,{configurable:!0,set:e}),q(t)},o(M[j],"toString",function(){return this._k}),P.f=X,L.f=Y,a("9093").f=x.f=Z,a("52a7").f=U,a("2621").f=tt,s&&!a("2d00")&&o(G,"propertyIsEnumerable",U,!0),h.f=function(t){return q(d(t))}),i(i.G+i.W+i.F*!H,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;et.length>at;)d(et[at++]);for(var rt=N(d.store),nt=0;rt.length>nt;)m(rt[nt++]);i(i.S+i.F*!H,"Symbol",{for:function(t){return n(K,t+="")?K[t]:K[t]=M(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in K)if(K[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),i(i.S+i.F*!H,"Object",{create:Q,defineProperty:Y,defineProperties:B,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),I&&i(i.S+i.F*(!H||c(function(){var t=M();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))})),"JSON",{stringify:function(t){var e,a,r=[t],n=1;while(arguments.length>n)r.push(arguments[n++]);if(a=e=r[1],(v(e)||void 0!==t)&&!W(t))return b(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!W(e))return e}),r[1]=e,V.apply(I,r)}}),M[j][A]||a("32e9")(M[j],A,M[j].valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},ac4d:function(t,e,a){a("3a72")("asyncIterator")},ac6a:function(t,e,a){for(var r=a("cadf"),n=a("0d58"),s=a("2aba"),i=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),f=c("toStringTag"),p=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(d),m=0;m<h.length;m++){var g,b=h[m],y=d[b],v=i[b],w=v&&v.prototype;if(w&&(w[u]||o(w,u,p),w[f]||o(w,f,b),l[b]=p,y))for(g in r)w[g]||s(w,g,r[g],!0)}},cd1c:function(t,e,a){var r=a("e853");t.exports=function(t,e){return new(r(t))(e)}},d4c0:function(t,e,a){var r=a("0d58"),n=a("2621"),s=a("52a7");t.exports=function(t){var e=r(t),a=n.f;if(a){var i,o=a(t),l=s.f,c=0;while(o.length>c)l.call(t,i=o[c++])&&e.push(i)}return e}},de7b:function(t,e,a){},e853:function(t,e,a){var r=a("d3f4"),n=a("1169"),s=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-c0b98ef2.193b7af4.js.map