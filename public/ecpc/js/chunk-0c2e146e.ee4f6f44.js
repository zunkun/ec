(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c2e146e"],{"0341":function(e,t,a){"use strict";var s=a("9e94"),n=a.n(s);n.a},"0a49":function(e,t,a){var s=a("9b43"),n=a("626a"),r=a("4bf8"),l=a("9def"),i=a("cd1c");e.exports=function(e,t){var a=1==e,o=2==e,c=3==e,p=4==e,u=6==e,d=5==e||u,f=t||i;return function(t,i,m){for(var y,g,b=r(t),v=n(b),h=s(i,m,3),w=l(v.length),_=0,D=a?f(t,w):o?f(t,0):void 0;w>_;_++)if((d||_ in v)&&(y=v[_],g=h(y,_,b),e))if(a)D[_]=g;else if(g)switch(e){case 3:return!0;case 5:return y;case 6:return _;case 2:D.push(y)}else if(p)return!1;return u?-1:c||p?p:D}}},1169:function(e,t,a){var s=a("2d95");e.exports=Array.isArray||function(e){return"Array"==s(e)}},"11bf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"types"}},[a("Header",[a("el-breadcrumb",{attrs:{slot:"left","separator-class":"el-icon-arrow-right"},slot:"left"},[a("el-breadcrumb-item",[e._v("基本设置")]),a("el-breadcrumb-item",[e._v("类型维护")])],1),a("div",{attrs:{slot:"right"},slot:"right"})],1),a("div",{staticClass:"inner"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"预算类型",name:"budgets"}},[a("TypeViews",{attrs:{grouptype:"budgets"}})],1),a("el-tab-pane",{attrs:{label:"收入目标",name:"incomings",lazy:!0}},[a("TypeViews",{attrs:{grouptype:"incomings"}})],1)],1)],1)],1)},n=[],r=a("0418"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"types"}},[a("el-row",[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeLists,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"编码",width:"140"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"140"}}),"incomings"===e.grouptype?a("el-table-column",{attrs:{label:"纵横轴",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.axisMap[t.row.axis])+"\n          ")]}}],null,!1,670952007)}):e._e(),"incomings"===e.grouptype?a("el-table-column",{attrs:{label:"定量/定性",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.qqMap[t.row.qq])+"\n          ")]}}],null,!1,3690644039)}):e._e(),"incomings"===e.grouptype?a("el-table-column",{attrs:{label:"正负项",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.pmMap[t.row.pm])+"\n          ")]}}],null,!1,4002247751)}):e._e(),"incomings"===e.grouptype?a("el-table-column",{attrs:{label:"单位",prop:"unit",width:"100"}}):e._e(),a("el-table-column",{attrs:{label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.typeMap[t.row.catalog])+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return 1===t.row.catalog?[a("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:function(a){return e.deleteType(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",size:"small",plain:""},on:{click:function(a){return e.editType(t.row)}}},[e._v("编辑")])]:void 0}}],null,!0)})],1),a("div",{staticClass:"type-btns"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:e.showTypeEdit}},[e._v("新 增 类 型")])],1)],1)],1),a("el-dialog",{attrs:{title:"类型编辑",visible:e.editShow,width:"60%"},on:{"update:visible":function(t){e.editShow=t}}},[a("div",[a("el-form",{ref:"typeform",attrs:{model:e.typeData,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{model:{value:e.typeData.code,callback:function(t){e.$set(e.typeData,"code",t)},expression:"typeData.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.typeData.name,callback:function(t){e.$set(e.typeData,"name",t)},expression:"typeData.name"}})],1)],1)],1),"incomings"===e.grouptype?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纵横轴",prop:"axis"}},[a("el-select",{attrs:{placeholder:"纵横轴"},model:{value:e.typeData.axis,callback:function(t){e.$set(e.typeData,"axis",t)},expression:"typeData.axis"}},[a("el-option",{attrs:{label:"横轴",value:1}}),a("el-option",{attrs:{label:"纵轴",value:2}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"定量定性",prop:"qq"}},[a("el-select",{attrs:{placeholder:"定量定性"},model:{value:e.typeData.qq,callback:function(t){e.$set(e.typeData,"qq",t)},expression:"typeData.qq"}},[a("el-option",{attrs:{label:"定量",value:1}}),a("el-option",{attrs:{label:"定性",value:2}})],1)],1)],1)],1):e._e(),"incomings"===e.grouptype?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"正负项",prop:"pm"}},[a("el-select",{attrs:{placeholder:"正负项"},model:{value:e.typeData.pm,callback:function(t){e.$set(e.typeData,"pm",t)},expression:"typeData.pm"}},[a("el-option",{attrs:{label:"正",value:1}}),a("el-option",{attrs:{label:"负",value:2}})],1)],1)],1),a("el-col",{attrs:{span:12,prop:"unit"}},[a("el-form-item",{attrs:{label:"单位",prop:"code"}},[a("el-input",{model:{value:e.typeData.unit,callback:function(t){e.$set(e.typeData,"unit",t)},expression:"typeData.unit"}})],1)],1)],1):e._e()],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:e.save}},[e._v("保 存")])],1)])],1)},i=[],o=(a("20d6"),{name:"typeviews",props:["grouptype"],data:function(){return{typeLists:[],typeMap:{0:"系统定义",1:"用户自建"},qqMap:{1:"定量",2:"定性"},axisMap:{1:"横轴",2:"纵轴"},pmMap:{1:"正",2:"负"},editShow:!1,typeData:{code:"",name:"",qq:1,axis:1,pm:1,unit:""},rules:{code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,message:"最少输入2个字符",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,message:"最少输入2个字符",trigger:"blur"}],axis:[{required:!0,message:"请选择纵横轴",trigger:"change"}],qq:[{required:!0,message:"请选择定量/定性",trigger:"change"}],pm:[{required:!0,message:"请选择定量/定性",trigger:"change"}],unit:[{required:!0,message:"请输入单位",trigger:"blur"}]}}},methods:{getTypeLists:function(){var e=this;this.$http.get("/ec/api/types?type=".concat(this.grouptype||"budgets")).then(function(t){var a=t.data;0===a.errcode&&(e.typeLists=a.data||[])})},showTypeEdit:function(){this.typeData={code:"",name:"",type:this.grouptype,catalog:1},this.editShow=!0},editType:function(e){this.typeData=e,this.editShow=!0},deleteType:function(e){var t=this;this.typeData=e,this.$http({url:"/ec/api/types",method:"DELETE",data:this.typeData}).then(function(e){0===e.data.errcode&&(t.$message({message:"删除成功",type:"success"}),t.getTypeLists(),t.editShow=!1)})},save:function(){var e=this;this.$refs.typeform.validate(function(t){if(t){var a="POST";if(e.typeData._id&&(a="PUT"),"POST"===a){var s=e.typeLists.findIndex(function(t){return t.code===e.typeData.code});if(s>-1)return e.$message({message:"已经存在编码为 ".concat(e.typeData.code,"的类型")})}else{var n=e.typeLists.findIndex(function(t){return t.code===e.typeData.code&&t._id!==e.typeData._id});if(n>-1)return e.$message({message:"已经存在编码为 ".concat(e.typeData.code,"的类型")})}e.$http({url:"/ec/api/types",method:a,data:e.typeData}).then(function(t){0===t.data.errcode&&(e.$message({message:"保存成功",type:"success"}),e.getTypeLists(),e.editShow=!1)})}else e.$message({message:"请正确填写类型信息",type:"warning"})})}},created:function(){this.getTypeLists()}}),c=o,p=(a("65d7"),a("2877")),u=Object(p["a"])(c,l,i,!1,null,"09be480c",null),d=u.exports,f={name:"types",components:{Header:r["a"],TypeViews:d},data:function(){return{activeName:"budgets"}}},m=f,y=(a("0341"),Object(p["a"])(m,s,n,!1,null,"dc014f20",null));t["default"]=y.exports},"20d6":function(e,t,a){"use strict";var s=a("5ca1"),n=a("0a49")(6),r="findIndex",l=!0;r in[]&&Array(1)[r](function(){l=!1}),s(s.P+s.F*l,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"65d7":function(e,t,a){"use strict";var s=a("ae4e"),n=a.n(s);n.a},"9e94":function(e,t,a){},ae4e:function(e,t,a){},cd1c:function(e,t,a){var s=a("e853");e.exports=function(e,t){return new(s(e))(t)}},e853:function(e,t,a){var s=a("d3f4"),n=a("1169"),r=a("2b4c")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),s(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-0c2e146e.ee4f6f44.js.map