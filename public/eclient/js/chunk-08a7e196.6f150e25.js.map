{"version":3,"sources":["webpack:///./src/views/Me.vue?0203","webpack:///./src/components/ApplyBasic.vue?7073","webpack:///src/components/ApplyBasic.vue","webpack:///./src/components/ApplyBasic.vue?4518","webpack:///./src/components/ApplyBasic.vue","webpack:///src/views/Me.vue","webpack:///./src/views/Me.vue?d426","webpack:///./src/views/Me.vue","webpack:///./src/components/ApplyBasic.vue?6209"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","approvals","count","staticRenderFns","ApplyBasicvue_type_template_id_68a82576_render","_l","approval","$index","key","staticClass","title","trip","desc","cause","status","applyStatus","_v","_s","parseDate","createTime","slot","size","type","plain","to","name","query","approvalId","_e","ApplyBasicvue_type_template_id_68a82576_staticRenderFns","ApplyBasicvue_type_script_lang_js_","props","data","10","20","30","40","50","60","methods","date","Date","concat","getFullYear","getMonth","getDate","components_ApplyBasicvue_type_script_lang_js_","component","Object","componentNormalizer","ApplyBasic","Mevue_type_script_lang_js_","components","page","limit","getApprovals","_this","length","$http","get","then","res","errcode","approvalData","catch","$toast","lowEnough","mainWindow","document","getElementById","pageHeight","Math","max","scrollHeight","body","offsetHeight","viewportHeight","window","innerHeight","documentElement","clientHeight","pageYOffset","scrollTop","watchApplyScroll","event","wait","arguments","undefined","mustTime","that","startTime","now","currentTime","clearTimeout","timeout","setTimeout","created","addEventListener","views_Mevue_type_script_lang_js_","Me_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyBasic_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyBasic_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-08a7e196.6f150e25.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"me\"}},[_c('ApplyBasic',{attrs:{\"approvals\":_vm.approvals,\"count\":_vm.count}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"applybasic\"}},[_vm._l((_vm.approvals),function(approval,$index){return _c('van-panel',{key:'approval-'+$index,staticClass:\"approval-panel\",attrs:{\"title\":approval.trip.title,\"desc\":approval.trip.cause,\"status\":_vm.applyStatus[approval.status]}},[_c('div',{staticClass:\"approval-content\"},[_c('p',[_vm._v(\"申请时间: \"+_vm._s(_vm.parseDate(approval.createTime)))])]),_c('div',{staticClass:\"approval-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-button',{staticClass:\"footer-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"to\":{name: 'apply', query: {id: approval.approvalId}}}},[_vm._v(\"详细\")])],1)])}),(!_vm.count)?_c('van-panel',{staticClass:\"approval-panel\",attrs:{\"title\":\"出差审批单\"}},[_c('div',{staticClass:\"approval-content\"},[_c('p',[_vm._v(\"当前没有出差审批单\")])]),_c('div',{staticClass:\"approval-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-button',{staticClass:\"footer-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"to\":{name: 'home'}}},[_vm._v(\"出差申请\")])],1)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"applybasic\">\n    <van-panel\n      :title=\"approval.trip.title\" \n      :desc=\"approval.trip.cause\" \n      :status=\"applyStatus[approval.status]\" \n      class=\"approval-panel\" \n      v-for=\"(approval, $index) in approvals\" :key=\"'approval-'+$index\">\n      <div class=\"approval-content\">\n        <p>申请时间: {{parseDate(approval.createTime)}}</p>\n      </div>\n      <div slot=\"footer\" class=\"approval-footer\">\n        <van-button size=\"small\" type=\"primary\" plain class=\"footer-btn\" :to=\"{name: 'apply', query: {id: approval.approvalId}}\">详细</van-button>\n      </div>\n    </van-panel>\n    <van-panel v-if=\"!count\" title=\"出差审批单\" class=\"approval-panel\">\n      <div class=\"approval-content\">\n        <p>当前没有出差审批单</p>\n      </div>\n      <div slot=\"footer\" class=\"approval-footer\">\n        <van-button size=\"small\" type=\"primary\" plain class=\"footer-btn\" :to=\"{name: 'home'}\">出差申请</van-button>\n      </div>\n    </van-panel>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ApprovalBasic',\n  props: ['approvals', 'count'],\n  data() {\n    return {\n      applyStatus: {\n        10: '待审批',\n        20: '审批中',\n        30: '审批通过',\n        40: '进入商旅',\n        50: '已拒绝',\n        60: '员工取消',\n      }\n    }\n  },\n  methods: {\n    parseDate(date) {\n      date = new Date(date)\n      return `${date.getFullYear()}年${date.getMonth() +1}月${date.getDate()}日`\n    },\n  }\n}\n</script>\n\n<style>\n.approval-footer {\n  text-align:right;\n}\n\n.footer-btn {\n  margin-left:10px;\n}\n\n.approval-content {\n  padding-left: 15px;\n}\n\n.approval-panel {\n  margin: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.a-z {\n  padding: 10px 15px;\n  font-size: 20px;\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApplyBasic.vue?vue&type=template&id=68a82576&\"\nimport script from \"./ApplyBasic.vue?vue&type=script&lang=js&\"\nexport * from \"./ApplyBasic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ApplyBasic.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"me\">\n    <ApplyBasic :approvals=\"approvals\" :count=\"count\" />\n  </div>\n</template>\n\n<script>\nimport ApplyBasic from '../components/ApplyBasic'\nexport default {\n  name: 'Me',\n  components: { ApplyBasic },\n  data() {\n    return {\n      page: 1,\n      limit: 10,\n      count: 0,\n      approvals: [],\n    }\n  },\n  methods: {\n    getApprovals() {\n      if(this.count && this.approvals.length >= this.count) {\n        return;\n      }\n      this.$http.get(`/ec/api/approvals/lists/basic?page=${this.page++}&limit=${this.limit}`).then(res => {\n        let data = res.data;\n        if(data.errcode === 0) {\n          let approvalData = data.data;\n          this.count = approvalData.count;\n          this.approvals = this.approvals.concat(approvalData.approvals);\n        }\n      }).catch(() =>{\n        this.$toast(`获取申请单列表失败`);\n      })\n    },\n\n    lowEnough() {\n      let mainWindow = document.getElementById('me');\n      if(!mainWindow) return;\n      let pageHeight = Math.max(mainWindow.scrollHeight, document.body.offsetHeight);\n      let viewportHeight = window.innerHeight ||\n        document.documentElement.clientHeight ||\n        mainWindow.clientHeight || 0;\n      let scrollHeight = window.pageYOffset ||\n        document.documentElement.scrollTop ||\n        mainWindow.scrollTop || 0;\n      // 通过 真实内容高度 - 视窗高度 - 上面隐藏的高度 < 20，作为加载的触发条件\n      return pageHeight - viewportHeight - scrollHeight < 60;\n    },\n\n    watchApplyScroll(event, wait=200, mustTime=3000) {\n      let that = this;\n      if (!this.startTime) {\n        this.startTime = Date.now();\n      }\n      let currentTime = Date.now();\n\n      return function () {\n        if ((currentTime - this.startTime) >= mustTime) {\n          this.startTime = currentTime;\n          clearTimeout(this.timeout)\n          if (that.lowEnough()) {\n            that.getApprovals();\n          }\n        } else {\n          clearTimeout(this.timeout)\n          this.timeout = setTimeout(function () {\n            this.startTime = Date.now();\n            if (that.lowEnough()) {\n             that.getApprovals();\n            }\n          }, wait)\n        }\n      }\n    },\n\n  },\n\n  created() {\n    this.getApprovals();\n    window.addEventListener('scroll', this.watchApplyScroll(), true)\n  }\n}\n</script>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Me.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Me.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Me.vue?vue&type=template&id=2255dcc6&\"\nimport script from \"./Me.vue?vue&type=script&lang=js&\"\nexport * from \"./Me.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}