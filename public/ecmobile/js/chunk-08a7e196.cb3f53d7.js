(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08a7e196"],{"0a99":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"me"}},[e("ApplyBasic",{attrs:{approvals:t.approvals,count:t.count}})],1)},n=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"applybasic"}},[t._l(t.approvals,function(a,o){return e("van-panel",{key:"approval-"+o,staticClass:"approval-panel",attrs:{title:a.trip.title,desc:a.trip.cause,status:t.applyStatus[a.status]}},[e("div",{staticClass:"approval-content"},[e("p",[t._v("申请时间: "+t._s(t.parseDate(a.createTime)))])]),e("div",{staticClass:"approval-footer",attrs:{slot:"footer"},slot:"footer"},[e("van-button",{staticClass:"footer-btn",attrs:{size:"small",type:"primary",plain:"",to:{name:"apply",query:{id:a.approvalId}}}},[t._v("详细")])],1)])}),t.count?t._e():e("van-panel",{staticClass:"approval-panel",attrs:{title:"出差审批单"}},[e("div",{staticClass:"approval-content"},[e("p",[t._v("当前没有出差审批单")])]),e("div",{staticClass:"approval-footer",attrs:{slot:"footer"},slot:"footer"},[e("van-button",{staticClass:"footer-btn",attrs:{size:"small",type:"primary",plain:"",to:{name:"home"}}},[t._v("出差申请")])],1)])],2)},i=[],l={name:"ApprovalBasic",props:["approvals","count"],data:function(){return{applyStatus:{10:"待审批",20:"审批中",30:"审批通过",40:"进入商旅",50:"已拒绝",60:"员工取消"}}},methods:{parseDate:function(t){return t=new Date(t),"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日")}}},r=l,p=(e("7909"),e("2877")),c=Object(p["a"])(r,s,i,!1,null,null,null),u=c.exports,v={name:"Me",components:{ApplyBasic:u},data:function(){return{page:1,limit:10,count:0,approvals:[]}},methods:{getApprovals:function(){var t=this;this.count&&this.approvals.length>=this.count||this.$http.get("/ec/api/approvals/lists/basic?page=".concat(this.page++,"&limit=").concat(this.limit)).then(function(a){var e=a.data;if(0===e.errcode){var o=e.data;t.count=o.count,t.approvals=t.approvals.concat(o.approvals)}}).catch(function(){t.$toast("获取申请单列表失败")})},lowEnough:function(){var t=document.getElementById("me");if(t){var a=Math.max(t.scrollHeight,document.body.offsetHeight),e=window.innerHeight||document.documentElement.clientHeight||t.clientHeight||0,o=window.pageYOffset||document.documentElement.scrollTop||t.scrollTop||0;return a-e-o<60}},watchApplyScroll:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=this;this.startTime||(this.startTime=Date.now());var n=Date.now();return function(){n-this.startTime>=e?(this.startTime=n,clearTimeout(this.timeout),o.lowEnough()&&o.getApprovals()):(clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.startTime=Date.now(),o.lowEnough()&&o.getApprovals()},a))}}},created:function(){this.getApprovals(),window.addEventListener("scroll",this.watchApplyScroll(),!0)}},h=v,m=Object(p["a"])(h,o,n,!1,null,null,null);a["default"]=m.exports},2803:function(t,a,e){},7909:function(t,a,e){"use strict";var o=e("2803"),n=e.n(o);n.a}}]);
//# sourceMappingURL=chunk-08a7e196.cb3f53d7.js.map