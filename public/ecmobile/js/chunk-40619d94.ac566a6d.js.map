{"version":3,"sources":["webpack:///./src/components/Approval/ApplyBasic.vue?8bf3","webpack:///./src/views/approval/ApplyLists.vue?5be8","webpack:///./src/components/Approval/ApplyBasic.vue?8c76","webpack:///src/components/Approval/ApplyBasic.vue","webpack:///./src/components/Approval/ApplyBasic.vue?822b","webpack:///./src/components/Approval/ApplyBasic.vue","webpack:///src/views/approval/ApplyLists.vue","webpack:///./src/views/approval/ApplyLists.vue?90c2","webpack:///./src/views/approval/ApplyLists.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyBasic_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ApplyBasic_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","id","approvals","count","staticRenderFns","ApplyBasicvue_type_template_id_5d9866c2_render","_l","approval","$index","key","staticClass","title","desc","trip","cause","status","applyStatus","_v","_s","parseDate","createTime","slot","size","type","plain","to","name","query","_e","ApplyBasicvue_type_template_id_5d9866c2_staticRenderFns","ApplyBasicvue_type_script_lang_js_","props","data","10","20","30","40","50","60","methods","date","Date","concat","getFullYear","getMonth","getDate","Approval_ApplyBasicvue_type_script_lang_js_","component","Object","componentNormalizer","ApplyBasic","ApplyListsvue_type_script_lang_js_","components","page","limit","getApprovals","_this","length","$http","get","then","res","errcode","approvalData","catch","$toast","lowEnough","mainWindow","document","getElementById","pageHeight","Math","max","scrollHeight","body","offsetHeight","viewportHeight","window","innerHeight","documentElement","clientHeight","pageYOffset","scrollTop","watchApplyScroll","event","wait","arguments","undefined","mustTime","that","startTime","now","currentTime","clearTimeout","timeout","setTimeout","created","addEventListener","approval_ApplyListsvue_type_script_lang_js_","ApplyLists_component","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAgeE,EAAG,8CCAne,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,CAAOC,GAAA,cAAkB,CAAAH,EAAA,cAAmBE,MAAA,CAAOE,UAAAR,EAAAQ,UAAAC,MAAAT,EAAAS,UAA6C,IAC1MC,EAAA,GCDIC,EAAM,WAAgB,IAAAX,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,CAAOC,GAAA,eAAmB,CAAAP,EAAAY,GAAAZ,EAAA,mBAAAa,EAAAC,GAAmD,OAAAV,EAAA,aAAuBW,IAAA,YAAAD,EAAAE,YAAA,iBAAAV,MAAA,CAA2DW,MAAA,OAAAC,KAAAL,EAAAM,KAAAC,MAAAC,OAAArB,EAAAsB,YAAAT,EAAAQ,UAAqF,CAAAjB,EAAA,OAAYY,YAAA,oBAA+B,CAAAZ,EAAA,KAAAJ,EAAAuB,GAAA,SAAAvB,EAAAwB,GAAAxB,EAAAyB,UAAAZ,EAAAa,kBAAAtB,EAAA,OAAoFY,YAAA,kBAAAV,MAAA,CAAqCqB,KAAA,UAAgBA,KAAA,UAAe,CAAAvB,EAAA,cAAmBY,YAAA,aAAAV,MAAA,CAAgCsB,KAAA,QAAAC,KAAA,UAAAC,MAAA,GAAAC,GAAA,CAAiDC,KAAA,QAAAC,MAAA,CAAuB1B,GAAAM,EAAAN,OAAmB,CAAAP,EAAAuB,GAAA,gBAAuBvB,EAAAS,MAAkWT,EAAAkC,KAAlW9B,EAAA,aAA+BY,YAAA,iBAAAV,MAAA,CAAoCW,MAAA,UAAiB,CAAAb,EAAA,OAAYY,YAAA,oBAA+B,CAAAZ,EAAA,KAAAJ,EAAAuB,GAAA,iBAAAnB,EAAA,OAA4CY,YAAA,kBAAAV,MAAA,CAAqCqB,KAAA,UAAgBA,KAAA,UAAe,CAAAvB,EAAA,cAAmBY,YAAA,aAAAV,MAAA,CAAgCsB,KAAA,QAAAC,KAAA,UAAAC,MAAA,GAAAC,GAAA,CAAiDC,KAAA,UAAe,CAAAhC,EAAAuB,GAAA,qBACpiCY,EAAe,GC0BnBC,EAAA,CACAJ,KAAA,gBACAK,MAAA,sBACAC,KAHA,WAIA,OACAhB,YAAA,CACAiB,GAAA,MACAC,GAAA,MACAC,GAAA,OACAC,GAAA,OACAC,GAAA,MACAC,GAAA,UAIAC,QAAA,CACApB,UADA,SACAqB,GAEA,OADAA,EAAA,IAAAC,KAAAD,GACA,GAAAE,OAAAF,EAAAG,cAAA,KAAAD,OAAAF,EAAAI,WAAA,OAAAF,OAAAF,EAAAK,UAAA,QC7CmWC,EAAA,0BCQnWC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAzC,EACAwB,GACF,EACA,KACA,KACA,MAIeqB,EAAAH,UCXfI,EAAA,CACAzB,KAAA,KACA0B,WAAA,CAAAF,cACAlB,KAHA,WAIA,OACAqB,KAAA,EACAC,MAAA,GACAnD,MAAA,EACAD,UAAA,KAGAqC,QAAA,CACAgB,aADA,WACA,IAAAC,EAAA7D,KACAA,KAAAQ,OAAAR,KAAAO,UAAAuD,QAAA9D,KAAAQ,OAGAR,KAAA+D,MAAAC,IAAA,sCAAAjB,OAAA/C,KAAA0D,OAAA,WAAAX,OAAA/C,KAAA2D,QAAAM,KAAA,SAAAC,GACA,IAAA7B,EAAA6B,EAAA7B,KACA,OAAAA,EAAA8B,QAAA,CACA,IAAAC,EAAA/B,OACAwB,EAAArD,MAAA4D,EAAA5D,MACAqD,EAAAtD,UAAAsD,EAAAtD,UAAAwC,OAAAqB,EAAA7D,cAEA8D,MAAA,WACAR,EAAAS,OAAA,gBAIAC,UAjBA,WAkBA,IAAAC,EAAAC,SAAAC,eAAA,MACA,GAAAF,EAAA,CACA,IAAAG,EAAAC,KAAAC,IAAAL,EAAAM,aAAAL,SAAAM,KAAAC,cACAC,EAAAC,OAAAC,aACAV,SAAAW,gBAAAC,cACAb,EAAAa,cAAA,EACAP,EAAAI,OAAAI,aACAb,SAAAW,gBAAAG,WACAf,EAAAe,WAAA,EAEA,OAAAZ,EAAAM,EAAAH,EAAA,KAGAU,iBA/BA,SA+BAC,GAAA,IAAAC,EAAAC,UAAA7B,OAAA,QAAA8B,IAAAD,UAAA,GAAAA,UAAA,OAAAE,EAAAF,UAAA7B,OAAA,QAAA8B,IAAAD,UAAA,GAAAA,UAAA,OACAG,EAAA9F,KACAA,KAAA+F,YACA/F,KAAA+F,UAAAjD,KAAAkD,OAEA,IAAAC,EAAAnD,KAAAkD,MAEA,kBACAC,EAAAjG,KAAA+F,WAAAF,GACA7F,KAAA+F,UAAAE,EACAC,aAAAlG,KAAAmG,SACAL,EAAAvB,aACAuB,EAAAlC,iBAGAsC,aAAAlG,KAAAmG,SACAnG,KAAAmG,QAAAC,WAAA,WACApG,KAAA+F,UAAAjD,KAAAkD,MACAF,EAAAvB,aACAuB,EAAAlC,gBAEA8B,OAOAW,QAtEA,WAuEArG,KAAA4D,eACAsB,OAAAoB,iBAAA,SAAAtG,KAAAwF,oBAAA,KChFmWe,EAAA,ECO/VC,EAAYnD,OAAAC,EAAA,KAAAD,CACdkD,EACAzG,EACAW,GACF,EACA,KACA,KACA,MAIegG,EAAA,WAAAD","file":"js/chunk-40619d94.ac566a6d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"approvals\"}},[_c('ApplyBasic',{attrs:{\"approvals\":_vm.approvals,\"count\":_vm.count}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"applybasic\"}},[_vm._l((_vm.approvals),function(approval,$index){return _c('van-panel',{key:'approval-'+$index,staticClass:\"approval-panel\",attrs:{\"title\":\"出差申请\",\"desc\":approval.trip.cause,\"status\":_vm.applyStatus[approval.status]}},[_c('div',{staticClass:\"approval-content\"},[_c('p',[_vm._v(\"申请时间: \"+_vm._s(_vm.parseDate(approval.createTime)))])]),_c('div',{staticClass:\"approval-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-button',{staticClass:\"footer-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"to\":{name: 'apply', query: {id: approval.id}}}},[_vm._v(\"详细\")])],1)])}),(!_vm.count)?_c('van-panel',{staticClass:\"approval-panel\",attrs:{\"title\":\"出差审批单\"}},[_c('div',{staticClass:\"approval-content\"},[_c('p',[_vm._v(\"当前没有出差审批单\")])]),_c('div',{staticClass:\"approval-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-button',{staticClass:\"footer-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"to\":{name: 'home'}}},[_vm._v(\"出差申请\")])],1)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"applybasic\">\n    <van-panel\n      title=\"出差申请\" \n      :desc=\"approval.trip.cause\" \n      :status=\"applyStatus[approval.status]\" \n      class=\"approval-panel\" \n      v-for=\"(approval, $index) in approvals\" :key=\"'approval-'+$index\">\n      <div class=\"approval-content\">\n        <p>申请时间: {{parseDate(approval.createTime)}}</p>\n      </div>\n      <div slot=\"footer\" class=\"approval-footer\">\n        <van-button size=\"small\" type=\"primary\" plain class=\"footer-btn\" :to=\"{name: 'apply', query: {id: approval.id}}\">详细</van-button>\n      </div>\n    </van-panel>\n    <van-panel v-if=\"!count\" title=\"出差审批单\" class=\"approval-panel\">\n      <div class=\"approval-content\">\n        <p>当前没有出差审批单</p>\n      </div>\n      <div slot=\"footer\" class=\"approval-footer\">\n        <van-button size=\"small\" type=\"primary\" plain class=\"footer-btn\" :to=\"{name: 'home'}\">出差申请</van-button>\n      </div>\n    </van-panel>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ApprovalBasic',\n  props: ['approvals', 'count'],\n  data() {\n    return {\n      applyStatus: {\n        10: '待审批',\n        20: '审批中',\n        30: '审批通过',\n        40: '进入商旅',\n        50: '已拒绝',\n        60: '员工取消',\n      }\n    }\n  },\n  methods: {\n    parseDate(date) {\n      date = new Date(date)\n      return `${date.getFullYear()}年${date.getMonth() +1}月${date.getDate()}日`\n    },\n  }\n}\n</script>\n\n<style>\n.approval-footer {\n  text-align:right;\n}\n\n.footer-btn {\n  margin-left:10px;\n}\n\n.approval-content {\n  padding-left: 15px;\n}\n\n.approval-panel {\n  margin: 10px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.a-z {\n  padding: 10px 15px;\n  font-size: 20px;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyBasic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApplyBasic.vue?vue&type=template&id=5d9866c2&\"\nimport script from \"./ApplyBasic.vue?vue&type=script&lang=js&\"\nexport * from \"./ApplyBasic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ApplyBasic.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"approvals\">\n    <ApplyBasic :approvals=\"approvals\" :count=\"count\" />\n  </div>\n</template>\n\n<script>\nimport ApplyBasic from '../../components/Approval/ApplyBasic'\nexport default {\n  name: 'Me',\n  components: { ApplyBasic },\n  data() {\n    return {\n      page: 1,\n      limit: 10,\n      count: 0,\n      approvals: [],\n    }\n  },\n  methods: {\n    getApprovals() {\n      if(this.count && this.approvals.length >= this.count) {\n        return;\n      }\n      this.$http.get(`/ec/api/approvals/lists/basic?page=${this.page++}&limit=${this.limit}`).then(res => {\n        let data = res.data;\n        if(data.errcode === 0) {\n          let approvalData = data.data;\n          this.count = approvalData.count;\n          this.approvals = this.approvals.concat(approvalData.approvals);\n        }\n      }).catch(() =>{\n        this.$toast(`获取申请单列表失败`);\n      })\n    },\n\n    lowEnough() {\n      let mainWindow = document.getElementById('me');\n      if(!mainWindow) return;\n      let pageHeight = Math.max(mainWindow.scrollHeight, document.body.offsetHeight);\n      let viewportHeight = window.innerHeight ||\n        document.documentElement.clientHeight ||\n        mainWindow.clientHeight || 0;\n      let scrollHeight = window.pageYOffset ||\n        document.documentElement.scrollTop ||\n        mainWindow.scrollTop || 0;\n      // 通过 真实内容高度 - 视窗高度 - 上面隐藏的高度 < 20，作为加载的触发条件\n      return pageHeight - viewportHeight - scrollHeight < 60;\n    },\n\n    watchApplyScroll(event, wait=200, mustTime=3000) {\n      let that = this;\n      if (!this.startTime) {\n        this.startTime = Date.now();\n      }\n      let currentTime = Date.now();\n\n      return function () {\n        if ((currentTime - this.startTime) >= mustTime) {\n          this.startTime = currentTime;\n          clearTimeout(this.timeout)\n          if (that.lowEnough()) {\n            that.getApprovals();\n          }\n        } else {\n          clearTimeout(this.timeout)\n          this.timeout = setTimeout(function () {\n            this.startTime = Date.now();\n            if (that.lowEnough()) {\n             that.getApprovals();\n            }\n          }, wait)\n        }\n      }\n    },\n\n  },\n\n  created() {\n    this.getApprovals();\n    window.addEventListener('scroll', this.watchApplyScroll(), true)\n  }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyLists.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyLists.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApplyLists.vue?vue&type=template&id=137ce171&\"\nimport script from \"./ApplyLists.vue?vue&type=script&lang=js&\"\nexport * from \"./ApplyLists.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}