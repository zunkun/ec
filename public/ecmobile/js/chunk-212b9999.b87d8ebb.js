(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-212b9999"],{"0cd8":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"budgetdetail"}},[e("FormBasic",{attrs:{application:t.application}}),t.process.applications?e("div",{staticClass:"pz"},t._l(t.process.applications,function(a,r){return e("div",{key:"application-"+r},[a.approvalTime||a.approvalUser?e("div",{staticClass:"note"},[e("p",[e("strong",[t._v("审批人:")]),t._v(" "+t._s(a.approvalUser.userName))]),a.note?e("p",[e("strong",[t._v("意见:")]),t._v(" "+t._s(a.note))]):t._e(),a.approvalTime?e("p",[e("strong",[t._v("时间:")]),t._v(" "+t._s(t.parseTime(a.approvalTime)))]):t._e(),e("p",[e("strong",[t._v("结果:")]),t._v(" "+t._s(t.applicationStatusMap[a.status]))])]):t._e()])}),0):t._e(),e("div",{staticClass:"pz"},[e("p",[e("strong",[t._v("当前状态:")]),e("span",{staticClass:"statusz"},[t._v("  "+t._s(t.statusMap[t.process.status]))])])]),[10,20].indexOf(t.process.status)>-1?e("div",{staticClass:"button-area"},[e("van-row",{attrs:{gutter:"20"}},[e("van-col",{attrs:{span:"12"}},[e("van-button",{attrs:{block:"",type:"danger",plain:""},on:{click:t.cancelApplication}},[t._v("撤 销")])],1),e("van-col",{attrs:{span:"12"}},[e("van-button",{attrs:{block:"",type:"primary",plain:"",to:{name:"applybudget",query:{id:t.application.id}}}},[t._v("修 改")])],1)],1)],1):t._e()],1)},s=[],n=e("768b"),i=(e("ac4d"),e("8a81"),e("ac6a"),e("1946")),o={name:"budgetdetail",components:{FormBasic:i["a"]},data:function(){return{applicationStatusMap:{10:"审批中",20:"同意",30:"拒绝"},statusMap:{10:"审批中",11:"员工取消",20:"审批中",21:"主管拒绝",30:"财务调整中",31:"财务撤回",40:"调出部门审批中",50:"调入部门审批中",60:"审批通过",61:"审批通过",62:"审批通过"},active:0,application:{group:{}},process:{},processLists:[]}},methods:{parseTime:function(t){return t=new Date(t),"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日").concat(t.getHours(),"时").concat(t.getMinutes(),"分")},getApplication:function(){var t=this;this.$route.query.id&&this.$http.get("/ec/api/applications/".concat(this.$route.query.id)).then(function(a){var e=a.data;0!==e.errcode?t.$toast.fail("获取费用申请单失败"):t.application=e.data})},initProcess:function(){this.processLists.push({title:"申请预算",userNames:[]});var t=!0,a=!1,e=void 0;try{for(var r,s=this.process.applications.entries()[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=Object(n["a"])(r.value,2),o=i[0],c=i[1],p={title:"第".concat(o+1,"级主管审批"),userNames:[]};c.deptId===this.process.deptId&&(p.title="直接主管审批");var u=!0,l=!1,v=void 0;try{for(var f,d=c.users[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;p.userNames.push(h.userName)}}catch(x){l=!0,v=x}finally{try{u||null==d.return||d.return()}finally{if(l)throw v}}this.processLists.push(p)}}catch(x){a=!0,e=x}finally{try{t||null==s.return||s.return()}finally{if(a)throw e}}var y={title:"财务调整",userNames:[]},m=!0,b=!1,_=void 0;try{for(var g,w=this.process.finances.users[Symbol.iterator]();!(m=(g=w.next()).done);m=!0){c=g.value;y.userNames.push(c.userName)}}catch(x){b=!0,_=x}finally{try{m||null==w.return||w.return()}finally{if(b)throw _}}this.processLists.push(y),this.processLists.push({title:"预算调出部门领导审批",userNames:[]}),this.processLists.push({title:"预算调入部门领导审批",userNames:[]}),this.processLists.push({title:"预算调整",userNames:[]})},getProcess:function(){var t=this;this.$route.query.id&&this.$http.get("/ec/api/processes/application/".concat(this.$route.query.id)).then(function(a){var e=a.data;if(0===e.errcode)return t.process=e.data,void t.initProcess()})},cancelApplication:function(){var t=this;this.$http.post("/ec/api/processes/application/".concat(this.application.id,"/cancel")).then(function(a){var e=a.data;if(0===e.errcode)return t.$toast.success("操作成功"),void t.getProcess();t.$toast.fail("操作失败")})}},created:function(){this.getApplication(),this.getProcess()}},c=o,p=(e("5574"),e("2877")),u=Object(p["a"])(c,r,s,!1,null,null,null);a["default"]=u.exports},1946:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"formbasic"}},[e("van-panel",{attrs:{title:"基本信息"}},[e("van-cell-group",[e("van-cell",{attrs:{title:"姓名",value:t.application.userName}}),e("van-cell",{attrs:{title:"部门"}},[t._v("\n        "+t._s(t.application.deptName)+"\n      ")])],1)],1),e("van-panel",{attrs:{title:"申请原因"}},[e("van-field",{attrs:{type:"textarea",readonly:""},model:{value:t.application.cause,callback:function(a){t.$set(t.application,"cause",a)},expression:"application.cause"}})],1)],1)},s=[],n={name:"formbasic",props:["application"],data:function(){return{}}},i=n,o=e("2877"),c=Object(o["a"])(i,r,s,!1,null,null,null);a["a"]=c.exports},"1af6":function(t,a,e){var r=e("63b6");r(r.S,"Array",{isArray:e("9003")})},"469f":function(t,a,e){e("6c1c"),e("1654"),t.exports=e("7d7b")},"4ee6":function(t,a,e){},5574:function(t,a,e){"use strict";var r=e("4ee6"),s=e.n(r);s.a},"5d73":function(t,a,e){t.exports=e("469f")},"768b":function(t,a,e){"use strict";var r=e("a745"),s=e.n(r);function n(t){if(s()(t))return t}var i=e("5d73"),o=e.n(i);function c(t,a){var e=[],r=!0,s=!1,n=void 0;try{for(var i,c=o()(t);!(r=(i=c.next()).done);r=!0)if(e.push(i.value),a&&e.length===a)break}catch(p){s=!0,n=p}finally{try{r||null==c["return"]||c["return"]()}finally{if(s)throw n}}return e}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,a){return n(t)||c(t,a)||p()}e.d(a,"a",function(){return u})},"7d7b":function(t,a,e){var r=e("e4ae"),s=e("7cd6");t.exports=e("584a").getIterator=function(t){var a=s(t);if("function"!=typeof a)throw TypeError(t+" is not iterable!");return r(a.call(t))}},9003:function(t,a,e){var r=e("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},a745:function(t,a,e){t.exports=e("f410")},f410:function(t,a,e){e("1af6"),t.exports=e("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-212b9999.b87d8ebb.js.map