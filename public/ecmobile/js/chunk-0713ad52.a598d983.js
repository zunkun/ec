(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0713ad52"],{"0ac9":function(t,a,o){"use strict";o.r(a);var s=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{attrs:{id:"approvals"}},[o("van-tabs",{on:{click:t.getApprovalLists},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[o("van-tab",{attrs:{title:"待审批"}},[o("ApprovalBasic",{attrs:{approvals:t.approvalLists[0].approvals,count:t.approvalLists[0].count}})],1),o("van-tab",{attrs:{title:"已审批"}},[o("ApprovalBasic",{attrs:{approvals:t.approvalLists[1].approvals,count:t.approvalLists[1].count}})],1)],1)],1)},e=[],p=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{attrs:{id:"approvalbasic"}},[t._l(t.approvals,function(a,s){return o("van-panel",{key:"approval-"+s,staticClass:"approval-panel",attrs:{title:a.trip.title,desc:a.trip.cause,status:t.approvalStatus[a.status]}},[o("div",{staticClass:"approval-content"},[o("p",[t._v("申请人: "+t._s(a.userName))]),o("p",[t._v("申请时间: "+t._s(t.parseDate(a.createTime)))])]),o("div",{staticClass:"approval-footer",attrs:{slot:"footer"},slot:"footer"},[o("van-button",{staticClass:"footer-btn",attrs:{size:"small",type:"primary",plain:"",to:{name:"approval",query:{id:a.id}}}},[t._v("详细")])],1)])}),t.count?t._e():o("van-panel",{staticClass:"approval-panel",attrs:{title:"出差审批单"}},[o("div",{staticClass:"approval-content"},[o("p",[t._v("当前没有出差审批单")])]),o("div",{staticClass:"approval-footer",attrs:{slot:"footer"},slot:"footer"},[o("van-button",{staticClass:"footer-btn",attrs:{size:"small",type:"primary",plain:"",to:{name:"home"}}},[t._v("出差申请")])],1)])],2)},n=[],r={name:"ApprovalBasic",props:["approvals","count"],data:function(){return{approvalStatus:{10:"待审批",20:"审批中",30:"审批通过",40:"进入商旅",50:"已拒绝",60:"员工取消"}}},methods:{parseDate:function(t){return t=new Date(t),"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日")}}},i=r,l=(o("4383"),o("2877")),c=Object(l["a"])(i,p,n,!1,null,null,null),v=c.exports,u={name:"approvals",components:{ApprovalBasic:v},data:function(){return{type:0,limit:10,approvalLists:{0:{page:1,count:0,approvals:[]},1:{page:1,count:0,approvals:[]}}}},methods:{getApprovalLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.type=t,this.approvalLists[t].approvals.length||this.getApprovals(t)},getApprovals:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.approvalLists[a].count&&this.approvalLists[a].approvals.length>=this.approvalLists[a].count||this.$http.get("/ec/api/approvals/lists/manage?type=".concat(a,"&limit=").concat(this.limit,"&page=").concat(this.approvalLists[a].page++)).then(function(o){var s=o.data;if(0===s.errcode){var e=s.data;t.approvalLists[a].approvals=t.approvalLists[a].approvals.concat(e.approvals),t.approvalLists[a].count=e.count||0,0===a&&t.$store.commit("setApprovalCount",t.approvalLists[a].count)}}).catch(function(){})},lowEnough:function(){var t=document.getElementById("approvals");if(t){var a=Math.max(t.scrollHeight,document.body.offsetHeight),o=window.innerHeight||document.documentElement.clientHeight||t.clientHeight||0,s=window.pageYOffset||document.documentElement.scrollTop||t.scrollTop||0;return a-o-s<60}},watchScroll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,o=this;this.startTime||(this.startTime=Date.now());var s=Date.now();return function(){s-this.startTime>=a?(this.startTime=s,clearTimeout(this.timeout),o.lowEnough()&&o.getApprovals(this.type)):(clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.startTime=Date.now(),o.lowEnough()&&o.getApprovals(this.type)},t))}}},created:function(){this.getApprovals(0),window.addEventListener("scroll",this.watchScroll(),!0)}},h=u,m=Object(l["a"])(h,s,e,!1,null,null,null);a["default"]=m.exports},4383:function(t,a,o){"use strict";var s=o("4f96"),e=o.n(s);e.a},"4f96":function(t,a,o){}}]);
//# sourceMappingURL=chunk-0713ad52.a598d983.js.map